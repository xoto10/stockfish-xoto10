#!/bin/bash


./stockfish_${1:-new} bench >bench.out 2>&1

if [[ ! -z "$1" ]] ; then
   dest=bench_${1}.out
elif [[ "$(git branch --no-color | grep '^*' | cut -c3-)" = master ]] ; then
   dest=bench_master.out
else
   br="$(git branch --no-color | grep '^*' | cut -c3-)"
   dest=bench_${br}.out
fi
\cp -f bench.out "$dest"

echo ""
grep 'Total .* Mean ' $dest
grep 'Total .* Hits ' $dest
echo "tail -5 $dest:"
tail -5 "$dest"

echo -e "\nmaster:\n$(grep -e "Nodes" -e "Total" bench_master.out)"

